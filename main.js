!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class t{constructor({name:e,link:t},s,n){this.name=e,this.link=t,this._cardSelector=s,this._handleImageClick=n,this._previewImageElement=null}_setEventListeners(){this._likeButton=this._cardElement.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteButton=this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this)}))}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._setEventListeners(),this._cardTitleElement=this._cardElement.querySelector(".card-title"),this._cardImageElement.src=this.link,this._cardImageElement.alt=this.name,this._cardTitleElement.textContent=this.name,this._cardElement}}var s=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t}_showInputError(e){this._errorMessageEl=this._formEl.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=e.validationMessage,this._errorMessageEl.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageEl=this._formEl.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageEl.textContent="",this._errorMessageEl.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}toggleButtonState(){if(this._hasInvalidInput(this._inputEls))return this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0;this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}resetValidation(){this.toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class n{constructor({popupSelector:e}){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}class i extends n{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._formButton=this._popupElement.querySelector(".modal__button"),this._formButtonText=this._formButton.textContent,this._handleFormSubmit=t,this._inputList=this._popupElement.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>e[t.name]=t.value)),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popupForm.addEventListener("submit",this._handleSubmit),super.setEventListeners()}_handleSubmit=e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset()}}const r=document.querySelector("#profile-edit-modal"),o=document.forms["profile-form"],a=document.querySelector("#profile-edit-button"),l=(r.querySelector("#profile-title-input"),r.querySelector("#profile-description-input"),document.querySelector("#add-card-modal"),document.forms["card-form"]),c=document.querySelector(".profile__add-button"),u=e=>{const s=function(e){return new t(e,"#card-template",E).getView()}(e);h.addItem(s)},d=new i("#profile-edit-modal",(function(e){const t=e.title,s=e.subheader;p.setUserInfo(t,s),d.close()}));d.setEventListeners();const m=new i("#add-card-modal",(function(e,t){const s=e.title,n=e.title,i=e.url;u({name:s,alt:n,link:i}),m.close()}));m.setEventListeners();const _=new class extends n{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector(".modal__image-preview"),this._previewImageTitle=this._popupElement.querySelector(".modal__image-title")}open({name:e,link:t}){this._previewImage.src=t,this._previewImage.alt=e,this._previewImageTitle.textContent=e,super.open()}}("#preview-modal");_.setEventListeners();const h=new class{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._classSection=document.querySelector(s)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._classSection.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:u},".cards__list");h.renderItems();const p=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._aboutElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent,about:this._aboutElement.textContent}}setUserInfo(e,t){this._nameElement.textContent=e,this._aboutElement.textContent=t}}(".profile__title",".profile__description");function E(e,t){_.open(e,t)}a.addEventListener("click",(()=>{const e=p.getUserInfo();d.setInputValues({title:e.name,subheader:e.about}),g.resetValidation(),d.open()})),c.addEventListener("click",(()=>{m.open(),v.toggleButtonState()}));const v=new s(e,l);v.enableValidation();const g=new s(e,o);g.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNqQnNHLFVBQVcwQixFQUFVRCxRQUV2QkUsRUFBeUIxRSxrQkFDekIyQyxFQUFpQm5DLE1BQU0sSUFJekI0QixFQUFXL0UsaUJBQWlCLFNBQVMsS0FDbkM2RixFQUFhMUMsT0FDYm1FLEVBQXFCbEYsbUJBQW1CLElBTTFDLE1BQU1rRixFQUF1QixJQUFJQyxFQUFjNUksRUFBUW1HLEdBQ3ZEd0MsRUFBcUIxRSxtQkFDckIsTUFBTXlFLEVBQTJCLElBQUlFLEVBQWM1SSxFQUFRZ0csR0FDM0QwQyxFQUF5QnpFLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBfaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZC10aXRsZVwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMubGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMubmFtZTtcbiAgICB0aGlzLl9jYXJkVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWwpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbDtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgcmV0dXJuICh0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlKTtcbiAgICB9XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpIHx8XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9mb3JtQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9mb3JtQnV0dG9uVGV4dCA9IHRoaXMuX2Zvcm1CdXR0b24udGV4dENvbnRlbnQ7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiAoaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSkpO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9oYW5kbGVTdWJtaXQgPSAoZXZ0KSA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfTtcbn1cbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vRWRpdCBQcm9maWxlXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZm9ybVwiXTtcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIlxuKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5cbi8vQWRkIE5ldyBDYXJkXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xuY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImNhcmQtZm9ybVwiXTtcbmNvbnN0IGFkZENhcmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmNvbnN0IHJlbmRlckNhcmQgPSAoY2FyZERhdGEpID0+IHtcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICBzZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XG59O1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9wdXBzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vL0VkaXQgUHJvZmlsZSBQb3B1cFxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXRcbik7XG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vQWRkIE5ldyBDYXJkIFBvcHVwXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCBoYW5kbGVBZGRDYXJkU3VibWl0KTtcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL1ByZXZpZXcgSW1hZ2UgUG9wdXBcbmNvbnN0IHByZXZpZXdJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctbW9kYWxcIik7XG5wcmV2aWV3SW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL1NlY3Rpb25cbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXG4gIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbi8vVXNlckluZm9cbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oXCIucHJvZmlsZV9fdGl0bGVcIiwgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2sobmFtZSwgbGluaykge1xuICBwcmV2aWV3SW1hZ2VQb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChwcm9maWxlRGF0YSkge1xuICBjb25zdCBuYW1lID0gcHJvZmlsZURhdGEudGl0bGU7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gcHJvZmlsZURhdGEuc3ViaGVhZGVyO1xuICB1c2VyLnNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKTtcbiAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KG5ld0NhcmREYXRhLCBjYXJkTGlzdEVsZW1lbnQpIHtcbiAgY29uc3QgbmFtZSA9IG5ld0NhcmREYXRhLnRpdGxlO1xuICBjb25zdCBhbHQgPSBuZXdDYXJkRGF0YS50aXRsZTtcbiAgY29uc3QgbGluayA9IG5ld0NhcmREYXRhLnVybDtcbiAgcmVuZGVyQ2FyZCh7IG5hbWUsIGFsdCwgbGluayB9KTtcbiAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgcmV0dXJuIG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spLmdldFZpZXcoKTtcbn1cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBMaXN0ZW5lcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8vRWRpdCBQcm9maWxlIEZvcm1cbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHVzZXJJbnB1dCA9IHVzZXIuZ2V0VXNlckluZm8oKTtcbiAgZWRpdFByb2ZpbGVQb3B1cC5zZXRJbnB1dFZhbHVlcyh7XG4gICAgdGl0bGU6IHVzZXJJbnB1dC5uYW1lLFxuICAgIHN1YmhlYWRlcjogdXNlcklucHV0LmFib3V0LFxuICB9KTtcbiAgcHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vL05ldyBDYXJkIEZvcm1cbmFkZENhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsaWRhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGFkZENhcmRGb3JtKTtcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUVkaXRGb3JtKTtcbnByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtcHJldmlld1wiXG4gICAgKTtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX2ltYWdlLXRpdGxlXCJcbiAgICApO1xuICB9XG5cbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc1NlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NsYXNzU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NsYXNzU2VjdGlvbi5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3Rvcikge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Fib3V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXRFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dEVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwibmFtZSIsImxpbmsiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9wcmV2aWV3SW1hZ2VFbGVtZW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl9kZWxldGVCdXR0b24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2VFbGVtZW50IiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZ2V0VmlldyIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkVGl0bGVFbGVtZW50Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJmb3JtRWwiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm1FbCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJfZXJyb3JNZXNzYWdlRWwiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiaW5wdXRMaXN0IiwiZXZlcnkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9pbnB1dEVscyIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZXZ0IiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2Zvcm1CdXR0b24iLCJfZm9ybUJ1dHRvblRleHQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJfaGFuZGxlU3VibWl0IiwicmVzZXQiLCJwcm9maWxlRWRpdE1vZGFsIiwicHJvZmlsZUVkaXRGb3JtIiwiZm9ybXMiLCJwcm9maWxlRWRpdEJ0biIsImFkZENhcmRGb3JtIiwiYWRkQ2FyZEJ0biIsInJlbmRlckNhcmQiLCJjYXJkRGF0YSIsImNhcmQiLCJjcmVhdGVDYXJkIiwic2VjdGlvbiIsImFkZEl0ZW0iLCJlZGl0UHJvZmlsZVBvcHVwIiwicHJvZmlsZURhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic3ViaGVhZGVyIiwidXNlciIsInNldFVzZXJJbmZvIiwibmV3Q2FyZFBvcHVwIiwibmV3Q2FyZERhdGEiLCJjYXJkTGlzdEVsZW1lbnQiLCJ1cmwiLCJwcmV2aWV3SW1hZ2VQb3B1cCIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld0ltYWdlVGl0bGUiLCJpdGVtcyIsInJlbmRlcmVyIiwiY2xhc3NTZWxlY3RvciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jbGFzc1NlY3Rpb24iLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfYWJvdXRFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJhYm91dCIsInVzZXJJbnB1dCIsInByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvciIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=